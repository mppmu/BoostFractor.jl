<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Implementation notes on dancer() function · BoostFractor</title><script data-outdated-warner src="../../assets/warner.js"></script><link rel="canonical" href="https://mppmu.github.io/ShapesOfVariables.jl/stable/code/dancer_implementation/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">BoostFractor</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><a class="tocitem" href="../../api/">API</a></li><li><a class="tocitem" href="../../LICENSE/">LICENSE</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Implementation notes on dancer() function</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Implementation notes on dancer() function</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/mppmu/BoostFractor.jl/blob/master/docs/src/code/dancer_implementation.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Implementation-notes-on-dancer()-function"><a class="docs-heading-anchor" href="#Implementation-notes-on-dancer()-function">Implementation notes on dancer() function</a><a id="Implementation-notes-on-dancer()-function-1"></a><a class="docs-heading-anchor-permalink" href="#Implementation-notes-on-dancer()-function" title="Permalink"></a></h1><p>The following outlines the indexing of the arrays.</p><pre><code class="nohighlight hljs">Boundaries:         [ 1,       2,      3,      4,     ...                ]
               MIRROR |       |       |       |      
               MIRROR |       |       |       |        ...
               MIRROR |       |       |       |      
Regions:              [  1    ,   2   ,   3   ,   4   ,  ...                ]
</code></pre><p>Arrays with indices refering to <strong>boundaries</strong> are:</p><pre><code class="nohighlight hljs"># in general:
SetupBoundaries.r</code></pre><p>Arrays with indices refering to <strong>regions</strong> are:</p><pre><code class="nohighlight hljs"># in general:
SetupBoundaries.distance
               .eps
               .relative_tilt_x
               .relative_tilt_y
               .relative_surfaces

# in dancer() function:
fields</code></pre><p>Before the call of the propagator the <code>rightmoving</code> fields are those leaving a boundary to the right, yet upropagated. The <code>leftmoving</code> fields are those leaving a boundary to the left, yet upropagated. Therefore in every gap in each step the <code>rightmoving</code> fields go from left to right (left leg) and vice versa.</p><p>In each outer iteration (while loop, &quot;measure of music&quot;) we do all propagations and reflection / transmissions for the whole system once.</p><p>In each sub-iteration (for loop, &quot;legs&quot;) we iterate over <em>boundaries</em>. At each boundary we &quot;pull&quot; the fields to the boundary using the propagator. Afterwards we calculate the reflection and transmission.</p><p>To save memory the index of <code>rightmoving</code> and <code>leftmoving</code> is swapped after each iteration, such that the reflected fields stay in the same place in memory and only one copy for one transmitted field has to be made. This is done at the end of each iteration of the outer loop.</p></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.8 on <span class="colophon-date" title="Thursday 14 October 2021 13:19">Thursday 14 October 2021</span>. Using Julia version 1.6.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
